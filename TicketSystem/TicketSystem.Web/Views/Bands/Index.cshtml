@model  IEnumerable< AllBandsServiceModel > 

@{
    ViewBag.Title = "All Bands";
    Layout = "_Layout";
    var bands = this.Model.GroupBy( b => b.Name[ 0 ] );
}

<script>
    document.getElementById("body").className += " nu-bands-Index";
</script>

<script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>


<div class="row" style="background: rgba(0, 0, 0, 0.4)">

    <h1 class="text-center">@( this.ViewData[ "Title" ] )</h1>
    <ul class="list-group">
        @foreach ( var band in bands.OrderBy( b => b.Key ) )
        {
            <div class="col-md-4" style="margin-bottom: 15px">
                <ul>
                    <h3>@band.Key</h3>
                    @foreach ( var b in band.OrderBy( bnd => bnd.Name ) )
                    {
                        <div class="toggler">
                            <li class="nu-bands-ListBands" style="background: black" id="@b.Id"><a asp-area="" asp-controller="Bands" asp-action="Details" asp-route-id="@b.Id">@b.Name</a> - @b.Genre</li>
                            <li class="row " style="display: none; list-style: none" id="@b.Id-album">
                                @foreach ( var album in b.Albums )
                                {
                                    <div class="col-md-3">
                                        <a asp-area="" asp-controller="Bands" asp-action="AlbumDetails" asp-route-id="@album.Id">
                                            <img src="@album.ImageUrl" style="width: 50px; height: 50px"/>
                                        </a>
                                    </div>
                                }
                            </li>
                        </div>
                    }
                </ul>
            </div>
        }
    </ul>
</div>

<script>
    $(document).ready(function() {
        $(".toggler li").click(function(event) {
            $("#" + event.target.id + "-album").toggle(200);
        });
    });
</script>